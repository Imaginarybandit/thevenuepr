<% layout('./layouts/boilerplate') %>
<div class="container my-5">
  <div class="row">
    <div class="col-lg-8">
      <!-- Main Content -->
      <h1 class="mb-4 headerColor">Editar Publicacion</h1>
      <form
        action="/publicacion/<%=publicacion._id%>?_method=PATCH"
        method="post"
        enctype="multipart/form-data"
      >
        <div class="form-group">
          <label for="postTitle" class="headerColor">Nombre</label>
          <input
            type="text"
            class="form-control"
            id="postTitle"
            name="title"
            placeholder="Enter post title"
            value="<%=publicacion.title%>"
          />
        </div>
        <div class="form-group">
          <label for="postContent" class="headerColor">Desripcion</label>
          <textarea
            class="form-control"
            id="postContent"
            name="description"
            rows="10"
            placeholder="Write your post content"
          >
<%=publicacion.description%></textarea
          >
        </div>

        <div class="form-group">
          <label for="postDate" class="headerColor">Fecha de actividad</label>
          <input
            type="date"
            class="form-control"
            id="postDate"
            name="date"
            placeholder="<%=publicacion.date%>"
            value="<%=publicacion.date%>"
          />
        </div>

        <div class="form-group">
          <label for="postImage" class="headerColor">Imagen</label>
          <input
            type="file"
            class="form-control"
            id="postImage"
            name="publImage"
            placeholder="Enter post image"
          />
        </div>

        <div class="form-group">
          <label for="postLocalizacion" class="headerColor">Localizacion</label>
          <input
            type="text"
            class="form-control"
            id="postLocalizacion"
            name="localizacion"
            placeholder="Enter post group"
            value="<%=publicacion.location%>"
          />
        </div>
        <div class="form-group">
          <label for="city" class="headerColor">City</label>
          <input
            type="text"
            class="form-control"
            id="city"
            name="city"
            placeholder="Enter post group"
            value="<%=publicacion.city%>"
          />
        </div>

        <div class="form-group">
          <label for="zipcode" class="headerColor">Zip Code</label>
          <input
            type="text"
            class="form-control"
            id="zipcode"
            name="zipcode"
            placeholder="Enter post group"
            value="<%=publicacion.zipcode%>"
          />
        </div>

        <button type="submit" class="btn btn-primary mt-3">
          Editar Publicacion
        </button>
      </form>
    </div>
  </div>
</div>
<script src="https://cdn.jsdelivr.net/npm/flatpickr@4.6.6/dist/flatpickr.min.js"></script>
<script>
  flatpickr("#postDate", {
    locale: "es",
    enableTime: true,
    dateFormat: "Y-m-d H:i",
    time_24hr: true,
  });
</script>
<script>
  const publiDate = document.getElementById("postDate");
  const dateString = publiDate.getAttribute("value");
  const date = new Date(dateString);

  const days = [
    "Domingo",
    "Lunes",
    "Martes",
    "Miercoles",
    "Jueves",
    "Viernes",
    "Sabado",
  ];

  const months = [
    "Enero",
    "Febrero",
    "Marzo",
    "Abril",
    "Mayo",
    "Junio",
    "Julio",
    "Agosto",
    "Septiembre",
    "Octubre",
    "Noviembre",
    "Diciembre",
  ];

  const day = days[date.getDay()];

  const month = months[date.getMonth()];

  const year = date.getFullYear();

  const dayOfMonth = date.getDate();

  const hours = date.getHours();

  const minutes = date.getMinutes();

  const normalHours = (hours) => {
    if (hours > 12) {
      return hours - 12;
    } else {
      return hours;
    }
  };

  const pmAm = (hours) => {
    if (hours > 12) {
      return "PM";
    } else {
      return "AM";
    }
  };

  publiDate.value = ` ${dayOfMonth} de ${month},${year} a las ${normalHours(
    hours
  )}:${minutes} ${pmAm(hours)} `;
</script>
